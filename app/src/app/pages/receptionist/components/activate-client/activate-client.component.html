<form
  [formGroup]="membershipForm"
  (ngSubmit)="onSaveClick()"
  (keydown.enter)="$event.preventDefault()"
>
  <h1 class="title" mat-dialog-title>Gestionar Membresía</h1>

  <div mat-dialog-content class="dialog-content-area">
    <div class="user-details-grid">
      <mat-form-field appearance="outline" class="grid-area-doc">
        <mat-label>Documento</mat-label>
        <input
          matInput
          formControlName="id_user"
          (keyup.enter)="searchUser()"
        />
        <button
          mat-icon-button
          matSuffix
          type="button"
          aria-label="Buscar documento"
          (click)="searchUser()"
        >
          <mat-icon>search</mat-icon>
        </button>
        @if (!membershipForm.get('id_user')?.value) {
        <mat-error> Por favor, haga clic en la lupa para buscar. </mat-error>}
      </mat-form-field>

      <mat-form-field appearance="outline" class="grid-area-name">
        <mat-label>Nombre</mat-label>
        <input matInput formControlName="name" readonly />
      </mat-form-field>

      <mat-form-field appearance="outline" class="grid-area-lastname">
        <mat-label>Apellidos</mat-label>
        <input matInput formControlName="lastName" readonly />
      </mat-form-field>

      <mat-form-field appearance="outline" class="grid-area-type">
        <mat-label>Tipo de membresía</mat-label>
        <mat-select formControlName="membershipTypeId">
          <mat-option
            *ngFor="let option of membershipOptions"
            [value]="option.id"
          >
            {{ option.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="grid-area-startdate">
        <mat-label>Fecha de inicio</mat-label>
        <input
          matInput
          [matDatepicker]="startPicker"
          formControlName="createdAt"
          readonly
        />
        <mat-datepicker-toggle
          disabled
          matIconSuffix
          [for]="startPicker"
          readonly
        ></mat-datepicker-toggle>
        <mat-datepicker #startPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline" class="grid-area-enddate">
        <mat-label>Fecha de finalización</mat-label>
        <input matInput [matDatepicker]="endPicker" formControlName="endAt" />
        <mat-datepicker-toggle
          disabled
          matIconSuffix
          [for]="endPicker"
          readonly
        ></mat-datepicker-toggle>
        <mat-datepicker #endPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline" class="grid-area-price">
        <mat-label>Precio</mat-label>
        <input matInput formControlName="membershipPrice" readonly />
      </mat-form-field>

      <mat-form-field appearance="outline" class="grid-area-frequency">
        <mat-label>Frecuencia</mat-label>
        <input matInput formControlName="membershipFrecuency" readonly />
      </mat-form-field>

      <mat-form-field appearance="outline" class="grid-area-desc">
        <mat-label>Descripción</mat-label>
        <textarea
          matInput
          formControlName="membershipDescription"
          readonly
        ></textarea>
      </mat-form-field>
    </div>
  </div>

  <div mat-dialog-actions class="dialog-actions" align="end">
    <button
      mat-stroked-button
      type="button"
      class="cancel-button"
      (click)="onCancelClick()"
    >
      Cancelar
    </button>
    <button
      mat-flat-button
      type="submit"
      class="save-button"
      [disabled]="membershipForm.invalid"
    >
      Guardar
    </button>
  </div>
</form>
